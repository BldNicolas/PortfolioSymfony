{% extends 'base.html.twig' %}

{% block header %}
    <nav>
        <a href="{{ path('app_index') }}" class="{{ app.request.attributes.get('_route') == 'app_index' ? 'active' : '' }}">Home</a>
        <a href="{{ path('portfolio_about_edit', {'id': portfolio.id}) }}">Ã€ propos</a>
        <a href="{{ path('portfolio_projects_edit', {'id': portfolio.id}) }}">Projets</a>
        <a href="{{ path('portfolio_experiences_edit', {'id': portfolio.id}) }}">Experience</a>
    </nav>
{% endblock %}

{% block title %}Edit Projects{% endblock %}

{% block body %}
    <h2>Add New Project</h2>
    {{ form_start(newProjectForm) }}
        {{ form_widget(newProjectForm) }}
        <button type="submit">Add Project</button>
    {{ form_end(newProjectForm) }}

    <h2>Existing Projects</h2>
    {% for project in projects %}
        <div>
            <h3>{{ project.title }}</h3>
            {{ form_start(editForms[project.id]) }}
                {{ form_widget(editForms[project.id]) }}
                <button type="submit">Save Changes</button>
            {{ form_end(editForms[project.id]) }}
            <form method="post" action="{{ path('app_project_delete', {'id': project.id}) }}" onsubmit="return confirm('Are you sure you want to delete this item?');">
                <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ project.id) }}">
                <button class="btn">Delete</button>
            </form>
        </div>
    {% endfor %}
    <a href="{{ path('app_portfolio_show', {'id': portfolio.id})}}">Afficher le portfolio</a>
    <a href="{{ path('portfolio_experiences_edit', {'id': portfolio.id})}}">Suivant</a>
{% endblock %}