{% extends 'base.html.twig' %}

{% block header %}
    <nav>
        <a href="{{ path('app_index') }}" class="{{ app.request.attributes.get('_route') == 'app_index' ? 'active' : '' }}">Home</a>
        <a href="{{ path('portfolio_about_edit', {'id': portfolio.id}) }}">Ã€ propos</a>
        <a href="{{ path('portfolio_projects_edit', {'id': portfolio.id}) }}">Projets</a>
        <a href="{{ path('portfolio_experiences_edit', {'id': portfolio.id}) }}">Experience</a>
    </nav>
{% endblock %}

{% block title %}Edit Experiences{% endblock %}

{% block body %}
    <h2>Add New Experience</h2>
    {{ form_start(newExperienceForm) }}
        {{ form_widget(newExperienceForm) }}
        <button type="submit">Add Experience</button>
    {{ form_end(newExperienceForm) }}

    <h2>Existing Experiences</h2>
    {% for experience in experiences %}
        <div>
            <h3>{{ experience.title }}</h3>
            {{ form_start(editExperienceForms[experience.id]) }}
                {{ form_widget(editExperienceForms[experience.id]) }}
                <button type="submit">Save Changes</button>
            {{ form_end(editExperienceForms[experience.id]) }}
            <form method="post" action="{{ path('app_experience_delete', {'id': experience.id}) }}" onsubmit="return confirm('Are you sure you want to delete this item?');">
                <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ experience.id) }}">
                <button class="btn">Delete</button>
            </form>
        </div>
    {% endfor %}
    <a href="{{ path('app_portfolio_show', {'id': portfolio.id})}}">Afficher le portfolio</a>
{% endblock %}